<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Type-Training</title>
	<meta nema="author" content="Johan Lindskogen" />
	<style type="text/css">
	body {font-family: sans-serif;font-size: 16px; text-align: center;}
	#container{width:500px;margin:0 auto;}
	img {border:0;}
	.selected {font-size: 30px;}
	#key span {-webkit-transition: all 200ms ease; -moz-transition: all 200ms ease; -o-transition: all 200ms ease; margin: 5px;}
	</style>
</head>
<body onload="MainRow = new List();MainRow.newKeys();">
<div id="container">
	<div id="key"></div>
	<span id="points">0</span>
</div>
 
<script type="text/javascript">
	var keyArray = {
		en: {
			top:['q','w','e','r','t','y','u','i','o','p'],
			middle:['a','s','d','f','g','h','j','k','l',';'],
			bottom:['z','x','c','v','b','n','m',',','.','-']
		},
		sv: {
			top:['q','w','e','r','t','y','u','i','o','p','å'],
			middle:['a','s','d','f','g','h','j','k','l','ö'],
			bottom:['z','x','c','v','b','n','m',',','.','-']
		}
	};
	var lang = keyArray[navigator.language]?navigator.language:"en";
	var points = 0, MainRow, currentKey, num;
	var elem = document.getElementById('key');
	var pts = document.getElementById('points');
	var uniqueKey = function() {
		do {
			var newNum = Math.floor(((Math.random()*10) % keyArray[lang].middle.length-1) + 1);
		} while(newNum == num);
		num = newNum;
		return newNum;
		
	};
	var List = function() {
		this.keys;
		this.keyElems;
		this.index;
		this.checkKey = function(pressedKey){
			if (String.fromCharCode(pressedKey) == this.keys[this.index]){
				changePts(1);
				this.nextKey();
			} else
				changePts(-1);
		};
		this.nextKey = function(){
			this.keyElems[this.index].className = '';
			if (this.index == this.keys.length-1){
				this.newKeys();
				return;
			}
			this.keyElems[++this.index].className = 'selected';
		};
		this.newKeys = function(){
			this.keys = [];
			this.keyElems = [];
			elem.innerHTML = '';
			this.index = 0;
			for (var i=0; i<10; i++){
				this.keys.push(keyArray[lang].middle[uniqueKey()]);
				var newEl = document.createElement('span');
				newEl.innerHTML = this.keys[i];
				if (i == 0)
					newEl.className = 'selected';
				this.keyElems.push(newEl);
				elem.appendChild(newEl);
			}
		};
	};
	var getKey = function(){	
		num = uniqueKey();
		elem.innerHTML = keyArray[num];
		currentKey = keyArray[num];
	};
	var changePts = function(val){
		pts.innerHTML = points = points + val;
	};
	document.onkeypress = function(e){
		var evObj = event;
		MainRow.checkKey(evObj.keyCode);
	};
</script>
</body>
</html>
